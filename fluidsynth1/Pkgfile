# Description: A real-time software synthesizer.
# URL: http://www.fluidsynth.org/
# Maintainer: Joacim Olsen Tangen, hi at joac dot im
# Depends on: cmake glib

name=fluidsynth1
version=1.1.11
release=1
source=(https://github.com/FluidSynth/fluidsynth/archive/v$version/fluidsynth-$version.tar.gz)

build() {
  cd fluidsynth-$version
  mkdir build
  cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DLIB_SUFFIX= -DCMAKE_BUILD_TYPE=Release

	sed \
		-e 's|lfluidsynth|lfluidsynth1|' \
		-e 's|lib64|lib|' \
		-e 's|/include|/include/fluidsynth1|' \
		-i fluidsynth.pc
  
	make
	make DESTDIR=$PKG install

	mv $PKG/usr/bin/fluidsynth $PKG/usr/bin/fluidsynth1
	rm $PKG/usr/lib/libfluidsynth.so
	mv $PKG/usr/lib/pkgconfig/fluidsynth.pc $PKG/usr/lib/pkgconfig/fluidsynth1.pc
	mv $PKG/usr/share/man/man1/fluidsynth.1 $PKG/usr/share/man/man1/fluidsynth1.1
	mv $PKG/usr/include/fluidsynth $PKG/usr/include/fluidsynth1
	mv $PKG/usr/include/fluidsynth.h $PKG/usr/include/fluidsynth1
}
